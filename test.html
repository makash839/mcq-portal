<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>MCQ Test</title>

<style>
body{
  font-family: Arial;
  background:#f2f2f2;
  padding:20px;
}
.box{
  background:#fff;
  max-width:800px;
  margin:auto;
  padding:20px;
}
button{
  padding:8px 15px;
  margin:5px;
}
.option{
  display:block;
  margin:6px 0;
}
</style>
</head>

<body>

<div class="box">
  <h2 id="subjectTitle"></h2>
  <h3 id="qno"></h3>
  <p id="question"></p>
  <div id="options"></div>

  <button onclick="nextQuestion()">Next</button>
  <button onclick="skipQuestion()">Skip</button>
  <button onclick="finalSubmit()">Final Submit</button>
</div>

<script>
/* ðŸ”¹ SUBJECT LOAD LOGIC */
const params = new URLSearchParams(window.location.search);
const subject = params.get("subject");

let questions = [];

if(subject === "history"){
  document.write('<script src="data/history.js"><\/script>');
}
if(subject === "polity"){
  document.write('<script src="data/polity.js"><\/script>');
}
if(subject === "geography"){
  document.write('<script src="data/geography.js"><\/script>');
}
</script>

<script>
let index = 0;
let correct = 0;
let wrong = 0;
let skipped = 0;
let userAnswers = [];

/* ðŸ”¹ AFTER FILE LOAD */
window.onload = () => {
  if(subject === "history") questions = historyQuestions;
  if(subject === "polity") questions = polityQuestions;
  if(subject === "geography") questions = geographyQuestions;

  document.getElementById("subjectTitle").innerText =
    subject.toUpperCase() + " MCQ TEST";

  loadQuestion();
};

function loadQuestion(){
  const q = questions[index];
  document.getElementById("qno").innerText =
    `Question ${index+1} / ${questions.length}`;
  document.getElementById("question").innerText = q.question;

  let html = "";
  q.options.forEach((opt,i)=>{
    html += `
      <label class="option">
        <input type="radio" name="opt" value="${i}">
        ${opt}
      </label>`;
  });
  document.getElementById("options").innerHTML = html;
}

function nextQuestion(){
  const selected = document.querySelector('input[name="opt"]:checked');

  if(selected){
    userAnswers[index] = Number(selected.value);
  }else{
    userAnswers[index] = null;
  }

  index++;
  if(index < questions.length){
    loadQuestion();
  }else{
    finalSubmit();
  }
}

function skipQuestion(){
  userAnswers[index] = null;
  skipped++;
  index++;
  if(index < questions.length){
    loadQuestion();
  }else{
    finalSubmit();
  }
}

function finalSubmit(){
  questions.forEach((q,i)=>{
    if(userAnswers[i] === null){
      // skipped
    }
    else if(userAnswers[i] === q.correct){
      correct++;
    }
    else{
      wrong++;
    }
  });

  document.body.innerHTML = `
    <div class="box">
      <h2>Result</h2>
      <p>Total: ${questions.length}</p>
      <p>Correct: ${correct}</p>
      <p>Wrong: ${wrong}</p>
      <p>Skipped: ${questions.length - correct - wrong}</p>
    </div>
  `;
}
</script>

</body>
</html>
